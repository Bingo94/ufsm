![](https://github.com/jonpe960/ufsm/raw/master/doc/logo.png)

[![Coverity](https://scan.coverity.com/projects/15860/badge.svg)](https://scan.coverity.com/projects/jonpe960-ufsm)
[![Build Status](https://travis-ci.org/jonpe960/ufsm.svg?branch=master)](https://travis-ci.org/jonpe960/ufsm)
[![Coverage Status](https://coveralls.io/repos/github/jonpe960/ufsm/badge.svg)](https://coveralls.io/github/jonpe960/ufsm)

uFSM is a statechart library written in C. uFSM is designed without any external dependencies and uses no dynamic memory allocation or recursion.

uFSM is desiged with embedded applications in mind but can also be used in other environments. 

Supported UML statchart features:

| Feature              | Implemented | Test case                              |
| -------------------- |:-----------:| -------------------------------------- |
| Simple state         | Yes         | test_simple                            |
| Composit states      | Yes         | test_simple_substate, test_xmi_machine |
| Submachines          | Yes         | test_xmi_machine                       |
| Compound transition  | Yes         | test_compound_transition               |
| Fork                 | Yes         | test_fork                              |
| Join                 | Yes         | test_join                              |
| Guards/Actions       | Yes         | test_guards_actions + various          |
| Shallow/Deep history | Yes         | test_xmi_machine, test_deephistory     | 
| exit/entry points    | Yes         | test_compound_transition               |
| Init/Final           | Yes         | all                                    |
| Event deferral       | No          |                                        |
| Terminate            | No          |                                        |
| Choice               | Yes         | test_choice                            |
| Junction             | No          |                                        |

Remaining work besides what's not implemented above:
 - An event queue
 - OSAL for mutex's
 - Some proper examples
 - Simulation/Analysis tool

# Description of test cases

All of the statecharts were drawn in StarUML and the XMI files generated with the 'XMI' plugin.

## XMI machine

This is a mixture of different tests. Most notably:
 - The acutal state machines are generated by importing an XMI file, using ufsmimport
 - Use of sub statemachines
 - Shallow history
 - Orthogonal regions

![](https://github.com/jonpe960/ufsm/raw/master/doc/test_xmi_machine1.png)
Top level state machine

![](https://github.com/jonpe960/ufsm/raw/master/doc/test_xmi_machine2.png)
Sub statemachine

## Deep history

![](https://github.com/jonpe960/ufsm/raw/master/doc/test_deephistory.png)



## Compound transitions

![](https://github.com/jonpe960/ufsm/raw/master/doc/test_compound_transition.png)

This statechart is taken from the UML standard, see chapter 14.2.3.9.6 for a complete description.

'test_compound_transition' tests entry and exits of parent states up until a least common ancestor. When event 'sig' is dispatched the transition algoritm executes the following: xS11; t1; xS1; t2; eT1; eT11; t3; eT111

## Fork

![](https://github.com/jonpe960/ufsm/raw/master/doc/test_fork.png)



